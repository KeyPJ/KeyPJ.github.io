---
layout:     post
title:      "优衣规划"
subtitle:   " \"Yui Program\""
date:       2020-06-15 23:30:00
author:     "KeyPJ"
header-img: "img/in-post/20200615/108831.webp.png"
tags:
    - 游戏
    - 公主连结
    - Spring Boot
    - Taro
    - React
    - Typescript
    
---

## 优衣规划

> 关于优衣规划  
>>本工具由某FGO玩家（兼渣渣后端码农）, 基于多端开发框架Taro开发，暂定h5端及小程序端   
数据及图片资源来源：干炸里脊资源    
角色数值计算参考：静流笔记    
页面设计参考：fgo素材规划  
小程序名称：优衣规划  
![image](https://image.52v6.com/pcr/wechat/扫码_搜索联合传播样式-标准色版.jpg)
网站地址：
> - [https://pcr.52v6.com](https://pcr.52v6.com)
> - [https://pcrd.52v6.com(国内)](https://pcrd.52v6.com)  



 
## 初步想法
[公主连结国服](https://game.bilibili.com/pcr/)于四月底开服，开服就N3掉落，但是刷装备的地图，已知工具的暂没有最优解。
于是，五一期间，稍微有点空闲时间，于是打算自己做个小工具，服务于自己。

## 后端
没错，最先开发的是纯后端，毕竟是渣渣的后端java开发，也就能干这点事儿了。

- 后端框架：springboot,  
- 数据库: sqlite, 干炸里脊资源提供  
- 线性规划: LpSovel

五一放假期间，一天半完成（期间还加班的，低端码农就是这么苦逼），查询及规划，无前端，无界面，请求全靠idea的rest clinet
当然，当时仅支持装备查询地图掉落及对应的规划。

由于使用太不方便了，于是打算弄个界面，也方便下群友使用。

## 前端

5月中旬，实在受不了没有界面了，鉴于实在不擅长样式，准备找个合适的框架直接上。

最最开始是准备Vue的，毕竟之前在公司学了一点，（公司缺人时，后端开发也来写前端），鉴于忘得差不多了，就准备直接学点新东西。

好家伙！Typescript+React，都没接触过！就决定是你了！于是我自学了几天，就开始基于[京东的Taro](https://github.com/NervJS/taro)来开发了，其中的原因也包含多端适配容易一点。

- 前端框架：Taro

## 开发日志

- 5月上旬，纯后端开发，仅支持http请求，无界面
- 5月中旬，纯前端开发，基于Taro, 鉴于数据较小，全部以本地数据json形式存储，仅h5端，期间注册了小程序账号，优衣规划（我这个不算迫害吧，已经有初音，静流在前了
- 5月25日，第一个小程序体验版本发布，仅有角色属性计算
- 5月29日，前端的线性规划[javascript-lp-solver](https://github.com/JWally/jsLPSolver)，实现比较容易，但跑出来的结果缺不大理想，准备线性规划放到后端
- 5月31日，捡起了之前没有用到的后端，进行了简短的前后端联调，实现单角色素材的线性规划，首个含有规划功能版本正式上线
- 6月 7日，规划功能正式上线，支持多角色。
- 6月13日，数据备份互通
- 6月15日，预计累计访问用户超过500

由于数据json过大，导致小程序打包失败，于是又来后面的分包操作，但主包随着功能的增加、数据增加也越来大，最终决定数据初始化由后端提供，暂存于本地。仅极少数功能需要请求服务器。

## 后记

本次简单的记录了，本博客搭建的主要原因之一，优衣规划的创建的源由和经过。  

在这个小工具的开发过程中，我遇到了平日工作中从没有遇到的问题，接触学习新东西时也遇到了不少的坑，但确实学到了很多东西。

目前我已经打算长期维护这个小工具，尽可能使用未接触或者不熟练掌握的东西，只要我游戏国服还没弃坑（flag在这里立下了  

遇到的坑后面再来慢慢分享，争取做个系列。

—— KeyPJ 记于 2020.6.15
